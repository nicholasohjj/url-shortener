@startuml URL Shortener - Component Diagram

!theme plain
skinparam linetype ortho

title URL Shortener - Component Relationships

package "Frontend Components" {
  component [HomePage] as HomePage
  component [URLForm] as Form
  component [ShortURLDisplay] as Display
}

package "API Routes" {
  component [POST /api/shorten] as ShortenAPI {
    + validateURL()
    + generateSlug()
    + createShortUrl()
  }
  
  component [GET /[slug]] as RedirectAPI {
    + findShortUrl()
    + updateClickCount()
    + redirect()
  }
}

package "Services" {
  component [URLValidator] as Validator {
    + isValidURL()
  }
  
  component [SlugGenerator] as SlugGen {
    + generateSlug()
    + ensureUnique()
  }
  
  component [ClickTracker] as Tracker {
    + trackClick()
    + updateMetrics()
  }
}

package "Data Access" {
  component [PrismaClient] as Prisma {
    + findUnique()
    + create()
    + update()
  }
  
  component [Database] as DB {
    + ShortUrl model
  }
}

HomePage --> Form : uses
HomePage --> Display : uses
Form --> ShortenAPI : POST request
Display --> ShortenAPI : receives response

ShortenAPI --> Validator : validates
ShortenAPI --> SlugGen : generates
ShortenAPI --> Prisma : creates record

RedirectAPI --> Prisma : queries
RedirectAPI --> Tracker : tracks (async)
RedirectAPI --> HomePage : redirects

Validator --> ShortenAPI : returns boolean
SlugGen --> ShortenAPI : returns slug
Tracker --> Prisma : updates

Prisma --> DB : SQL queries

' Styling
skinparam component {
  BackgroundColor #E8F5E9
  BorderColor #2E7D32
}

skinparam package {
  BackgroundColor #F3E5F5
  BorderColor #6A1B9A
}

@enduml

